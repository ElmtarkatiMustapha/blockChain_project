<!-- 
  filieres: data,
  cycle: req.query.cycle,
  departement: req.query.departement,
  departements
  successMessage: message,
  errorMessage: error,
 -->
<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('../../globalParts/header.ejs') %>
  <link rel="stylesheet" href="style/adminFilieres.css">
  <title>Filieres</title>
</head>
<body style="background-color: #fafafa;">
  <%- include('../../globalParts/preload.ejs') %>
  <%- include('../parts/menus.ejs') %>
  <%- include('../../globalParts/messages.ejs') %>
  
  <div class="container-fluid section-1 p-4">
    <div class="row align-items-center m-0">
      <div class="col-12 col-sm-4 col-md-7 p-3">
        <div class="title">
          Fili√©res:
        </div>
      </div>
      <div class="col-12 col-sm-8 col-md-5  container-fluid">
        <form method="get" action="" id="formSubmit" class="row m-0">
          <div class="col-9 p-2">
            <select class="form-select" onchange="changeForm()" name="departement" id="departement">
              <option value="">Departements</option>
              <% if (typeof departements != "undefined") { %>
                  <% departements.forEach(item => { %>
                      <% if (item._id == departement) { %>
                          <option selected value="<%- item._id %>"><%- item.label %></option>
                        <% } else { %>
                          <option value="<%- item._id %>"><%- item.label %></option>
                      <% } %>
                  <% }) %>
              <% } %>
            </select>
          </div>
          <div class="col-3  p-2">
            <a href="/filieres/addNew" class="btn btn-custom-orange">Ajouter</a>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="container-fluid section-2 p-5 pt-2 pb-2">
    <div class="row">
      <% if (typeof filieres != undefined && filieres.length != 0 && filieres != "") { %>
       <% filieres.forEach(item => { %>
        <div class="col-12 col-sm-6 col-md-4 col-lg-3 p-3">
          <a href="/filieres/show/<%- item.id %>" class="elem text-center p-3">
            <div class="title p-1">
              <%- item.title %>
            </div>
            <div class="cycle p-1">
              <%- item.cycle %>
            </div> 
          </a>
        </div>
        <% }) %>
      <% } %>
    </div>
  </div>
  
  <%- include('../../globalParts/footer.ejs') %>
  <script>
    function changeForm() {
      const form = document.getElementById("formSubmit");
      form.submit();
    }
  </script>
</body>
</html>
