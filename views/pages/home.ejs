<%- include("../parts/header.ejs") %> 

<nav class="navbar navbar-expand-md">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">
      <img class="img img-brand" src="/images/brand.png" alt="">
    </a>
    <!-- <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button> -->
    <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasRight" aria-controls="offcanvasRight">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="/">Accueil</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#contact">Contact</a>
        </li>
        <li class="nav-item">
          <!-- <a class="nav-link d-block d-md-none" href="#">Login</a> -->
          <a class="btn btn-custom-orange " href="/login">Login</a>
        </li>
      </ul>
    </div>
    
  </div>
</nav>
<div class="offcanvas offcanvas-end " tabindex="-1" id="offcanvasRight" aria-labelledby="offcanvasRightLabel">
  <div class="offcanvas-header">
    <h5 id="offcanvasRightLabel"></h5>
    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/">Accueil</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#contact">Contact</a>
      </li>
      <li class="nav-item">
        <a class="nav-link " href="#">Login</a>
        <!-- <a class="btn btn-custom-orange d-none d-md-block " href="/login">Login</a> -->
      </li>
    </ul>
  </div>  
</div>

<div class="container-fluid section1">
  <div class="row justify-content-center m-0 p-1">
    <div class="col-sm-12 col-md-10 col-lg-6 text-center ">
      <div class="h1 title">Bienvenue à l'ENS de RABAT</div>
      <div class="sub-title h4">
        Cet espace reservé pour la recherche sur un diplôme délivré par l'ENS de RABAT
      </div>
    </div>
  </div>
  <div class="row justify-content-center m-0">
    <form id="form1" method="get" action="" class="col-sm-12 col-md-10 d-none d-sm-block search-part">
      <div class="search-div">
        <input type="text" id="search-input" required class="input-search"  placeholder="Tapez ici.." name="dataToSearch" id="">
        <input type="submit" id="submit-button" class="btn btn-search" value="Rechercher">
      </div>
      <div class="search-type-div container-fluid p-3">
        <div class="row justify-content-center ">
          <div class="col-sm-4 col-md-4 col-lg-2 text-center ">
            <input type="radio" class="form-check-input " checked name="searchType" value="id" id="id">
            <label class="form-check-label" for="id">ID du diplôme</label>
          </div>
          <div class="col-sm-4 col-md-4 col-lg-2 text-center ">
            <input type="radio" class="form-check-input " name="searchType" value="cin" id="cin">
            <label class="form-check-label" for="cin">CIN du Candidat</label>
          </div>
          <div class="col-sm-4 col-md-4 col-lg-2 text-center ">
            <input type="radio" class="form-check-input " name="searchType" value="cne" id="cne">
            <label class="form-check-label" for="cne">CNE du Candidat</label>
          </div>
          <div class="col-sm-4 col-md-4 col-lg-2 text-center ">
            <input type="radio" class="form-check-input " name="searchType" value="section" id="section">
            <label class="form-check-label" for="section">Section du diplôme</label>
          </div>
          <div class="col-sm-4 col-md-4 col-lg-2 text-center ">
            <input type="radio" class="form-check-input " name="searchType" value="name" id="name">
            <label class="form-check-label" for="name">Nom et Prénom</label>
          </div>
        </div>
      </div>
    </form>
    <form method="get" action="" class="col-sm-12 col-md-10 d-block  text-center d-sm-none pt-3">
      <div class="mobile-search">
        <div class="search-type-div container-fluid p-3">
          <div style="font-family: 'jost',sans-serif; color: #2F4383; font-weight: 600;" class="h3 row justify-content-center">Rechercher avec:</div>
          <div class="row justify-content-center ">
            <div class="col-6 col-sm-6 col-md-4 col-lg-2 text-start  ">
              <input type="radio" checked class="form-check-input " checked name="searchType" value="id" id="idm">
              <label class="form-check-label" for="idm">ID du diplôme</label>
            </div>
            <div class=" col-6 col-sm-6 col-md-4 col-lg-2 text-start ">
              <input type="radio" class="form-check-input " name="searchType" value="cin" id="cinm">
              <label class="form-check-label" for="cinm">CIN du Candidat</label>
            </div>
            <div class="col-6 col-sm-6 col-md-4 col-lg-2 text-start ">
              <input type="radio" class="form-check-input " name="searchType" value="cne" id="cnem">
              <label class="form-check-label" for="cnem">CNE du Candidat</label>
            </div>
            <div class=" col-6 col-sm-6 col-md-4 col-lg-2 text-start ">
              <input type="radio" class="form-check-input " name="searchType" value="section" id="sectionm">
              <label class="form-check-label" for="sectionm">Section</label>
            </div>
            <div class="col-6 col-sm-6 col-md-4 col-lg-2 text-start ">
              <input type="radio" class="form-check-input " name="searchType" value="name" id="namem">
              <label class="form-check-label" for="namem">Nom et Prénom</label>
            </div>
          </div>
        </div>
        <div class="search-div">
          <input type="text" id="" required  placeholder="Tapez ici.." name="dataToSearch" class=" input-search">
        </div>
        <div class="search-div">
          <input type="submit" value="Rechercher" class="btn btn-search">
        </div>
      </div>
    </form>
  </div>
</div>
<!-- strat lead data -->

<% if (typeof diplomes != "undefined") { %>
  <% if (diplomes.length > 0 && diplomes[0].idDiplom != "") { %>
    <% diplomes.forEach(item => { %>
      <div class="parent-certificate">
      <div  class="container-fluid">
        <div class="row justify-content-center">
          <div class="col-11 col-md-11 col-lg-8">
            <div class="result-section toPrint">
              <div class="certificat container-fluid">
                <div class="row row-1">
                  <div class="col-2 text-center">
                    <img src="/images/logo1.png" class="logo" alt="">
                  </div>
                  <div class="col-8 text-center">
                    <div class="company-name">Université Mohammed V de RABAT <br> Ecole Normale Supérieur </div>
                    <img src="/images/shape1.png" class="shape1" alt="">
                  </div>
                  <div class="col-2 text-center">
                    <img src="/images/logo2.png" class="logo" alt="">
                  </div>
                </div>
                <div class="row row-2 justify-content-center">
                  <div class="col-11 text-center">
                    <div class="title"><%- item.diplomaType %></div>
                    <div class="sub-title"> <span style="font-weight: bold;">Filiere:</span> <%- item.sector %></div>
                    <div class="student-name"><%-item.FullName %></div>
                    <div class="student-infos container-fluid">
                      <div class="row">
                        <div class="col-3 text-center">
                          <div class="info"><span>Date naissance: </span> <%- item.dateNaissance %> </div>
                        </div>
                        <div class="col-3 text-center">
                          <div class="info"><span>CIN: </span> <%- item.cin %> </div>
                        </div>
                        <div class="col-3 text-center">
                          <div class="info"><span>CNE: </span> <%- item.cne %> </div>
                        </div>
                        <div class="col-3 text-center">
                          <div class="info"><span>Section: </span> <%- item.section %> </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row row-3">
                  <div class="col-10 pt-3 container-fluid">
                    <div class="row">
                      <div class="col-4 text-center">
                        <img src="/images/signature1.png" alt="" class="signature">
                        <div class="name-person">mr Mustapha El Mtarkati</div>
                        <div class="profession">developpeur web</div>
                      </div>
                      <div class="col-4 text-center">
                        <img src="<%- qrData %>" alt="" class="qrCode">
                      </div>
                      <div class="col-4 text-center">
                        <img src="/images/signature2.png" alt="" class="signature">
                        <div class="name-person">mr Mustapha El Mtarkati</div>
                        <div class="profession">developpeur web</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="container-fluid p-4">
        <div class="row m-0 justify-content-center">
          <div class="col-11 col-md-11 col-lg-8 container-fluid ">
            <div class="row m-0">
              <div class="col-6 text-end">
                <button class="btn btn-orange" onclick="printCerti(this)"> Télecharger</button>
              </div>
              <div class="col-6">
                <button class="btn btn-blue" onclick=""> Partager</button>
              </div>
            </div>
          </div>
        </div>
      </div>
      </div>
    <% }) %>
  <% } else { %>
    <div class="container-fluid pt-2 pb-4">
      <div class="row justify-content-center">
        <div class="col-10 text-center">
          <div style="color: rgba(0, 0, 0, 0.56)" class="not-found display-3">
            Aucun diplome trouvé!!
          </div>
        </div>
      </div>
    </div>
  <% } %>
<% } %>




<!-- end load data -->

<!-- contact section -->

<div class="container-fluid contact">
  <div class="row m-0 justify-content-center">
    <div class="col-sm-12 col-md-11">
      <div class="elem p-3 container-fluid">
        <div class="row m-0 row-1 p-4 justify-content-center">
          <div class="col-12 title text-center">
            <div class="h1">Contactez-nous</div>
          </div>
        </div>
        <div class="row m-0 row-2 justify-content-center">
          <div class="col-sm-12 col-md-4 p-2 text-center">
            <div class="icon">
              <i class="fa-solid fa-phone"></i>
            </div>
            <div class="title h2">Téléphone</div>
            <div class="content">0653707131</div>
          </div>
          <div class="col-sm-12 col-md-4 p-2 text-center">
            <div class="icon">
              <i class="fa-solid fa-location-dot"></i>
            </div>
            <div class="title h2">Siège</div>
            <div class="content">ENS Avenue Mohamed Bel Hassan El
Ouazzani, BP : 5118. Takaddoum 
- Rabat Maroc. </div>
          </div>
          <div class="col-sm-12 col-md-4 p-2 text-center">
            <div class="icon">
              <i class="fa-solid fa-envelopes-bulk"></i>
            </div>
            <div class="title h2">E-Mail</div>
            <div class="content">ens@um5.ac.ma</div>
          </div>
        </div>
        <div class="row m-0 row-3 justify-content-center">
          <div class="col-12 text-center">
            <a href="http://" class="link">
              <i class="fa-brands fa-square-facebook"></i>
            </a>
            <a href="http://" class="link">
              <i class="fa-brands fa-square-instagram"></i>
            </a>
            <a href="http://" class="link">
              <i class="fa-brands fa-linkedin"></i>
            </a>
            <a href="http://" class="link">
              <i class="fa-brands fa-square-twitter"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div  class="container-fluid footer">
  <div class="void-box"></div>
  <div class="row">
    <div class="col-sm-12 col-md-4 align-self-center text-center">
      <img class="logo-img" src="/images/logoWhite.png" alt="" srcset="">
    </div>
    <div class="col-sm-12 col-md-4 ">
      <div class="title h4">Historique</div>
      <div class="content">
        L’École Normale Supérieure (E.N.S.) de Rabat a été créée en 1978, à côté d’autres établissements du même genre, dans le cadre d’un programme national destiné à la formation des enseignants du Secondaire de second cycle
      </div>
    </div>
    <div class="col-sm-12 col-md-4 ">
      <div class="title h4">Liens utiles</div>
      <div class="content">
        <ul class="nav">
          <li class="nav-link">
            <a href="" target="_blank" rel="noopener noreferrer">Ecole Normale Supérieur </a>
          </li>
          <li class="nav-link">
            <a href="" target="_blank" rel="noopener noreferrer">Ecole Normale Supérieur </a>
          </li>
          <li class="nav-link">
            <a href="" target="_blank" rel="noopener noreferrer">Ecole Normale Supérieur </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>


<script src= "https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.js"> </script>
<script>
  //To create a pdf
  function printCerti(elem){
    let parent = elem.closest(".parent-certificate");
    // var btn = document.getElementById("btn");
      var createpdf = parent.querySelector("div > div > div > .toPrint");
      var opt = {
         margin: 0,
         filename: 'pdfcreated.pdf',
         html2canvas: {
            scale: 4,
            width: 2000,
         },
         jsPDF: {
            unit: 'px',
            format: 'A4',
            orientation: 'landscape'
         }
      };
      html2pdf().set(opt).from(createpdf).save();
  }
</script>

<%- include("../parts/footer.ejs") %>
